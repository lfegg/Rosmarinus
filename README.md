# Rosmarinus — 文本统计工具

一个用 MoonBit 编写的简单文本统计工具：读取指定文件并统计如下信息：

- 文本字数（字符总数，含空白与标点）
- 文本行数（按换行符计数）
- 英文单词数（连续的 ASCII 字母/数字/下划线视为一个单词）
- 中文字数（每个中文汉字计 1）
- 标点符号数（非中文、非英文词字符、且非空白）

> 暂时是对中英文混排文本进行更符合直觉的统计：英文按单词，中文按字，标点不计入“单词数”。将来希望和 Elina 解析器项目一起用于实现一个记事本

---

## 计数规则说明

### 英文单词 English words

- 定义：由 ASCII 字母 A–Z、a–z，数字 0–9，下划线 `_` 组成的连续序列，视为一个英文单词。
- 分隔：遇到其它字符（空白、标点、中文等）会打断英文单词。

### 中文字 Chinese characters

- 定义：每个中文汉字单独计数。
- 当前涵盖的 Unicode 范围：
  - CJK 基本汉字：U+4E00–U+9FFF
  - CJK 扩展 A：U+3400–U+4DBF
  - 汉字“〇”：U+3007
- 如需支持更多扩展区（B–H、兼容表意文字），可在 `is_chinese` 中继续补充范围。

### 标点 punctuation

- 定义：非中文、非英文词字符、且非空白的字符。
- 仅用于输出“标点符号数”，不影响“英文单词数 + 中文字数”的总和。

---

## 项目结构（简要）

- `src/main.mbt`
  - `is_chinese`：判断是否为中文汉字（基于 Unicode 码点范围）
  - `is_whitespace`：判断空白字符
  - `is_english_word_char`：判断是否为英文单词字符（字母/数字/下划线）
  - `count_line`、`count_char`、`count_english_words`、`count_chinese_chars`、`count_punctuation`：分模块统计函数
  - `count_all`：聚合函数，复用上述函数并返回五项统计结果
  - `main`：程序入口，读取文件路径、调用统计、打印结果

---

## 快速开始

前置：已安装 MoonBit 工具链，并在项目根目录。

运行统计：

```powershell
moon info; moon fmt; moon check
moon run src
```

首次运行会读取项目根目录下的 `README.md` 并打印统计结果。

---

## 配置要统计的文件

默认统计的文件路径定义在 `src/main.mbt` 的 `main` 函数内：

```moonbit
let path = "./README.md"
```

将其改为任意目标文件的相对或绝对路径即可，例如：

```moonbit
let path = "./data/article.txt"
```

保存后重新运行 `moon run src`。

---

## 示例输出

以下仅为示例，实际数值取决于你的文件内容：

```text
文本字数1597
文本行数100
英文单词数87
中文字数599
文本中英文单词数686
标点符号数255
```

说明：
- “文本字数”包含空白与标点；
- “文本单词数”= 英文单词数 + 中文字数；
- 标点不计入“文本单词数”。
